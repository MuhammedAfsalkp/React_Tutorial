{"ast":null,"code":"import { uiActions } from \"./ui-slice\";\nimport { cartActions } from \"./cart-slice\";\nexport const fetchCartData = () => {\n  return async dispatch => {\n    const fetchDta = async () => {\n      const response = await fetch('https://react-request-test-default-rtdb.firebaseio.com/cart.json');\n\n      if (!response.ok) {\n        throw new Error('Cannot access cart data!!');\n      }\n\n      const data = await response.json();\n      return data;\n    };\n\n    try {\n      const cartData = await fetchDta();\n      dispatch(cartActions.replaceCart({\n        items: cartData.items.length === 0 ? totalQuantity : cartData.totalQuantity\n      }));\n    } catch (err) {\n      dispatch(uiActions.setNotification({\n        title: 'Failed',\n        message: err.message,\n        status: 'error'\n      }));\n    }\n  };\n}; //2.aproach of using asyn task\n//instead of implying asynchronous task in component can imply in as the creatorFunction like eralier\n//actionfunction perform managed by redux,her we are the responsible for\n//dispatch will get automatically\n\nexport const sendCartData = cart => {\n  return async dispatch => {\n    dispatch(uiActions.setNotification({\n      title: 'Sending',\n      message: 'Sending request...',\n      status: 'pending'\n    }));\n\n    const sendRequest = async () => {\n      const response = await fetch('https://react-request-test-default-rtdb.firebaseio.com/cart.json', {\n        //instead of adding overwrite the current cart\n        method: 'PUT',\n        body: JSON.stringify(cart)\n      });\n\n      if (!response.ok) {\n        throw new Error('something went wrong!!');\n      }\n    };\n\n    try {\n      await sendRequest();\n      dispatch(uiActions.setNotification({\n        title: 'Success',\n        message: 'Request has been sent',\n        status: 'success'\n      }));\n    } catch (err) {\n      dispatch(uiActions.setNotification({\n        title: 'Failed',\n        message: err.message,\n        status: 'error'\n      }));\n    }\n  };\n};","map":{"version":3,"sources":["C:/Users/INFOSYS/Desktop/02-refresher-practice-finished/src/store/cart-actions.js"],"names":["uiActions","cartActions","fetchCartData","dispatch","fetchDta","response","fetch","ok","Error","data","json","cartData","replaceCart","items","length","totalQuantity","err","setNotification","title","message","status","sendCartData","cart","sendRequest","method","body","JSON","stringify"],"mappings":"AAAA,SAASA,SAAT,QAA0B,YAA1B;AACA,SAASC,WAAT,QAA4B,cAA5B;AAGA,OAAO,MAAMC,aAAa,GAAG,MAAK;AAC9B,SAAO,MAAOC,QAAP,IAAmB;AACtB,UAAMC,QAAQ,GAAG,YAAS;AACtB,YAAMC,QAAQ,GAAC,MAAMC,KAAK,CAAC,kEAAD,CAA1B;;AACA,UAAG,CAACD,QAAQ,CAACE,EAAb,EAAgB;AACZ,cAAM,IAAIC,KAAJ,CAAU,2BAAV,CAAN;AACD;;AACD,YAAMC,IAAI,GAAG,MAAMJ,QAAQ,CAACK,IAAT,EAAnB;AACA,aAAOD,IAAP;AAEL,KARD;;AASA,QAAG;AACD,YAAME,QAAQ,GAAI,MAAMP,QAAQ,EAAhC;AACAD,MAAAA,QAAQ,CAACF,WAAW,CAACW,WAAZ,CAAwB;AAC7BC,QAAAA,KAAK,EAACF,QAAQ,CAACE,KAAT,CAAeC,MAAf,KAA0B,CAA1B,GACNC,aADM,GACQJ,QAAQ,CAACI;AAFM,OAAxB,CAAD,CAAR;AAMD,KARD,CAQC,OAAMC,GAAN,EAAU;AAEPb,MAAAA,QAAQ,CAACH,SAAS,CAACiB,eAAV,CAA0B;AAACC,QAAAA,KAAK,EAAC,QAAP;AACnCC,QAAAA,OAAO,EAACH,GAAG,CAACG,OADuB;AAEnCC,QAAAA,MAAM,EAAC;AAF4B,OAA1B,CAAD,CAAR;AAMH;AACJ,GA3BD;AA4BH,CA7BM,C,CAgCP;AACA;AACA;AACA;;AACA,OAAO,MAAMC,YAAY,GAAIC,IAAD,IAAS;AACjC,SAAO,MAAOnB,QAAP,IAAmB;AACxBA,IAAAA,QAAQ,CAACH,SAAS,CAACiB,eAAV,CAA0B;AAACC,MAAAA,KAAK,EAAC,SAAP;AAC/BC,MAAAA,OAAO,EAAC,oBADuB;AAE/BC,MAAAA,MAAM,EAAC;AAFwB,KAA1B,CAAD,CAAR;;AAMA,UAAMG,WAAW,GAAG,YAAW;AAC7B,YAAMlB,QAAQ,GAAC,MAAMC,KAAK,CAAC,kEAAD,EAAoE;AAC5F;AACAkB,QAAAA,MAAM,EAAC,KAFqF;AAG5FC,QAAAA,IAAI,EAACC,IAAI,CAACC,SAAL,CAAeL,IAAf;AAHuF,OAApE,CAA1B;;AAKA,UAAG,CAACjB,QAAQ,CAACE,EAAb,EAAgB;AACd,cAAM,IAAIC,KAAJ,CAAU,wBAAV,CAAN;AACD;AACF,KATD;;AAWA,QAAG;AAED,YAAMe,WAAW,EAAjB;AACApB,MAAAA,QAAQ,CAACH,SAAS,CAACiB,eAAV,CAA0B;AAACC,QAAAA,KAAK,EAAC,SAAP;AACnCC,QAAAA,OAAO,EAAC,uBAD2B;AAEnCC,QAAAA,MAAM,EAAC;AAF4B,OAA1B,CAAD,CAAR;AAKD,KARD,CAQC,OAAMJ,GAAN,EAAU;AAETb,MAAAA,QAAQ,CAACH,SAAS,CAACiB,eAAV,CAA0B;AAACC,QAAAA,KAAK,EAAC,QAAP;AACnCC,QAAAA,OAAO,EAACH,GAAG,CAACG,OADuB;AAEnCC,QAAAA,MAAM,EAAC;AAF4B,OAA1B,CAAD,CAAR;AAKD;AAEF,GAnCD;AAoCD,CArCI","sourcesContent":["import { uiActions } from \"./ui-slice\"\r\nimport { cartActions } from \"./cart-slice\"\r\n\r\n\r\nexport const fetchCartData = () =>{\r\n    return async (dispatch) =>{\r\n        const fetchDta = async()=>{\r\n            const response=await fetch('https://react-request-test-default-rtdb.firebaseio.com/cart.json')\r\n            if(!response.ok){\r\n                throw new Error('Cannot access cart data!!')\r\n              }\r\n              const data = await response.json();\r\n              return data;\r\n\r\n        }\r\n        try{\r\n          const cartData =  await fetchDta();\r\n          dispatch(cartActions.replaceCart({\r\n              items:cartData.items.length === 0?\r\n              totalQuantity:cartData.totalQuantity \r\n          }))\r\n\r\n\r\n        }catch(err){\r\n\r\n            dispatch(uiActions.setNotification({title:'Failed',\r\n            message:err.message,\r\n            status:'error'\r\n            }))\r\n\r\n\r\n        }\r\n    }\r\n}\r\n\r\n\r\n//2.aproach of using asyn task\r\n//instead of implying asynchronous task in component can imply in as the creatorFunction like eralier\r\n//actionfunction perform managed by redux,her we are the responsible for\r\n//dispatch will get automatically\r\nexport const sendCartData = (cart) =>{\r\n    return async (dispatch) =>{\r\n      dispatch(uiActions.setNotification({title:'Sending',\r\n          message:'Sending request...',\r\n          status:'pending'\r\n          }))\r\n  \r\n  \r\n      const sendRequest = async () =>{\r\n        const response=await fetch('https://react-request-test-default-rtdb.firebaseio.com/cart.json',{\r\n          //instead of adding overwrite the current cart\r\n          method:'PUT',\r\n          body:JSON.stringify(cart)\r\n        })\r\n        if(!response.ok){\r\n          throw new Error('something went wrong!!')\r\n        }\r\n      }\r\n  \r\n      try{\r\n  \r\n        await sendRequest()\r\n        dispatch(uiActions.setNotification({title:'Success',\r\n        message:'Request has been sent',\r\n        status:'success'\r\n        }))\r\n  \r\n      }catch(err){\r\n  \r\n        dispatch(uiActions.setNotification({title:'Failed',\r\n        message:err.message,\r\n        status:'error'\r\n        }))\r\n  \r\n      }\r\n  \r\n    }\r\n  }"]},"metadata":{},"sourceType":"module"}